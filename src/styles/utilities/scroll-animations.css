/**
 * üöÄ SCROLL-DRIVEN ANIMATIONS - Modern CSS (2024-2025)
 * 
 * Uses animation-timeline: view() for scroll-triggered animations
 * NO JAVASCRIPT required!
 * 
 * Browser Support:
 * - Chrome 115+ ‚úÖ
 * - Edge 115+ ‚úÖ
 * - Safari 17.5+ ‚ö†Ô∏è (limited support)
 * - Firefox: Not yet (falls back gracefully)
 * 
 * Fallback: Elements appear immediately (no animation)
 * Progressive enhancement - animations are bonus!
 */

@layer utilities {
  /* ========================================================================
     FADE IN ON SCROLL - Smooth entrance animations
     ======================================================================== */

  /**
   * Fade in from bottom - Classic scroll reveal
   * 
   * Usage:
   * <div class="animate-fade-in-up">
   *   Content appears when scrolling into view
   * </div>
   */
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(2rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    animation: fade-in-up linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  /* ========================================================================
     FADE IN FROM LEFT/RIGHT - Staggered reveals
     ======================================================================== */

  @keyframes fade-in-left {
    from {
      opacity: 0;
      transform: translateX(-2rem);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  @keyframes fade-in-right {
    from {
      opacity: 0;
      transform: translateX(2rem);
    }
    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-fade-in-left {
    animation: fade-in-left linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  .animate-fade-in-right {
    animation: fade-in-right linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  /* ========================================================================
     SCALE IN - Zoom entrance effect
     ======================================================================== */

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-scale-in {
    animation: scale-in linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 30%;
  }

  /* ========================================================================
     PARALLAX EFFECTS - Depth and movement
     ======================================================================== */

  /**
   * Slow parallax - Background elements
   * Moves slower than scroll speed (depth effect)
   */
  @keyframes parallax-slow {
    from {
      transform: translateY(-10%);
    }
    to {
      transform: translateY(10%);
    }
  }

  .parallax-slow {
    animation: parallax-slow linear both;
    animation-timeline: view();
    animation-range: entry 0% exit 100%;
  }

  /**
   * Fast parallax - Foreground elements
   * Moves faster than scroll speed
   */
  @keyframes parallax-fast {
    from {
      transform: translateY(15%);
    }
    to {
      transform: translateY(-15%);
    }
  }

  .parallax-fast {
    animation: parallax-fast linear both;
    animation-timeline: view();
    animation-range: entry 0% exit 100%;
  }

  /* ========================================================================
     ROTATE ON SCROLL - Dynamic rotation
     ======================================================================== */

  @keyframes rotate-in {
    from {
      opacity: 0;
      transform: rotate(-5deg) scale(0.95);
    }
    to {
      opacity: 1;
      transform: rotate(0deg) scale(1);
    }
  }

  .animate-rotate-in {
    animation: rotate-in linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 30%;
  }

  /* ========================================================================
     BLUR TO FOCUS - Attention-grabbing reveal
     ======================================================================== */

  @keyframes blur-to-focus {
    from {
      opacity: 0;
      filter: blur(10px);
    }
    to {
      opacity: 1;
      filter: blur(0);
    }
  }

  .animate-blur-to-focus {
    animation: blur-to-focus linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 35%;
  }

  /* ========================================================================
     PROGRESSIVE REVEAL - Clip-path animation
     ======================================================================== */

  @keyframes reveal-left {
    from {
      clip-path: inset(0 100% 0 0);
    }
    to {
      clip-path: inset(0 0 0 0);
    }
  }

  .animate-reveal-left {
    animation: reveal-left linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 40%;
  }

  /* ========================================================================
     STAGGER ANIMATIONS - Sequential reveals
     ======================================================================== */

  /**
   * Auto-stagger child elements
   * Each child animates 100ms after the previous one
   * 
   * Usage:
   * <ul class="stagger-fade-in">
   *   <li>Item 1</li>
   *   <li>Item 2</li>
   *   <li>Item 3</li>
   * </ul>
   */
  .stagger-fade-in > * {
    animation: fade-in-up linear both;
    animation-timeline: view();
    animation-range: entry 0% cover 25%;
  }

  .stagger-fade-in > *:nth-child(1) {
    animation-delay: 0ms;
  }
  .stagger-fade-in > *:nth-child(2) {
    animation-delay: 100ms;
  }
  .stagger-fade-in > *:nth-child(3) {
    animation-delay: 200ms;
  }
  .stagger-fade-in > *:nth-child(4) {
    animation-delay: 300ms;
  }
  .stagger-fade-in > *:nth-child(5) {
    animation-delay: 400ms;
  }
  .stagger-fade-in > *:nth-child(6) {
    animation-delay: 500ms;
  }
  .stagger-fade-in > *:nth-child(7) {
    animation-delay: 600ms;
  }
  .stagger-fade-in > *:nth-child(8) {
    animation-delay: 700ms;
  }
  .stagger-fade-in > *:nth-child(9) {
    animation-delay: 800ms;
  }
  .stagger-fade-in > *:nth-child(10) {
    animation-delay: 900ms;
  }

  /* ========================================================================
     UTILITY CLASSES - Animation controls
     ======================================================================== */

  /* Disable animations for reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in-up,
    .animate-fade-in-left,
    .animate-fade-in-right,
    .animate-scale-in,
    .animate-rotate-in,
    .animate-blur-to-focus,
    .animate-reveal-left,
    .parallax-slow,
    .parallax-fast,
    .stagger-fade-in > * {
      animation: none !important;
      opacity: 1 !important;
      transform: none !important;
      filter: none !important;
      clip-path: none !important;
    }
  }

  /* Slower animations for dramatic effect */
  .animate-slow {
    animation-duration: 1.5s !important;
  }

  /* Faster animations for snappy feel */
  .animate-fast {
    animation-duration: 0.3s !important;
  }

  /* Delayed start - useful for sequencing */
  .animate-delay-1 {
    animation-delay: 100ms !important;
  }
  .animate-delay-2 {
    animation-delay: 200ms !important;
  }
  .animate-delay-3 {
    animation-delay: 300ms !important;
  }
  .animate-delay-4 {
    animation-delay: 400ms !important;
  }
  .animate-delay-5 {
    animation-delay: 500ms !important;
  }
}

/* ============================================================================
   POLYFILL FALLBACK - For browsers without scroll-driven animations
   ============================================================================ */

/**
 * Progressive enhancement fallback
 * If animation-timeline is not supported, elements appear immediately
 * This is by design - better than invisible content!
 */
@supports not (animation-timeline: view()) {
  .animate-fade-in-up,
  .animate-fade-in-left,
  .animate-fade-in-right,
  .animate-scale-in,
  .animate-rotate-in,
  .animate-blur-to-focus,
  .animate-reveal-left,
  .stagger-fade-in > * {
    animation: none;
    opacity: 1;
    transform: none;
    filter: none;
    clip-path: none;
  }

  /* Keep parallax subtle even without scroll-driven animations */
  .parallax-slow,
  .parallax-fast {
    animation: none;
    transform: none;
  }
}

/**
 * ðŸš€ MODERN RESPONSIVE SYSTEM - Container Queries + Media Queries
 * 
 * Latest Features (2024-2025):
 * - Container queries (@container) for component-level responsiveness
 * - Modern media query ranges (width < 768px instead of max-width)
 * - Fluid sizing with clamp()
 * - Touch-friendly targets (44x44px minimum)
 * - Desktop-first approach
 * - CSS containment for performance
 * 
 * Browser Support: All modern browsers (2023+)
 * Fallback: Desktop styles
 */

/* ============================================================================
   ðŸ“¦ CONTAINER QUERIES - Component-level responsiveness
   ============================================================================ */

/* Enable container queries on common container elements */
.container,
[class*='container'],
main,
section,
article {
  container-type: inline-size;
  container-name: layout;
}

/* ============================================================================
   âœ… CHECKBOXES & RADIO BUTTONS - Touch-friendly
   ============================================================================ */

input[type='checkbox'],
input[type='radio'] {
  /* Desktop default - 24px */
  width: 1.5rem;
  height: 1.5rem;
  min-width: 1.5rem;
  min-height: 1.5rem;
  flex-shrink: 0;
  cursor: pointer;
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Mobile override - 44px (WCAG AAA) */
  @media (width < 768px) {
    width: 2.75rem;
    height: 2.75rem;
    min-width: 2.75rem;
    min-height: 2.75rem;
  }

  /* Container query alternative */
  @container layout (inline-size < 48rem) {
    width: 2.75rem;
    height: 2.75rem;
  }
}

/* Labels with interactive elements */
label:has(> input[type='checkbox']),
label:has(> input[type='radio']) {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  cursor: pointer;
  user-select: none;
  min-height: 1.5rem;

  @media (width < 768px) {
    gap: 0.75rem;
    min-height: 2.75rem;
  }
}

/* ============================================================================
   ðŸ”˜ BUTTONS - Touch-friendly sizing
   ============================================================================ */

/* Icon buttons */
button.btn-icon,
button[aria-label]:not([class*='btn-']) {
  /* Desktop: 32px */
  width: 2rem;
  height: 2rem;
  min-width: 2rem;
  min-height: 2rem;
  padding: 0.25rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* Mobile: 44px */
  @media (width < 768px) {
    width: 2.75rem;
    height: 2.75rem;
    min-width: 2.75rem;
    min-height: 2.75rem;
    padding: 0.5rem;
  }

  /* Container query */
  @container layout (inline-size < 48rem) {
    width: 2.75rem;
    height: 2.75rem;
  }
}

/* Button icons */
button svg,
button img {
  /* Desktop: 16px */
  width: 1rem;
  height: 1rem;
  flex-shrink: 0;

  /* Mobile: 20px */
  @media (width < 768px) {
    width: 1.25rem;
    height: 1.25rem;
  }
}

/* Action buttons */
button:not(.btn-icon):not([aria-label]),
.btn,
.btn-primary,
.btn-secondary {
  /* Desktop: 32px */
  min-height: 2rem;
  padding-block: 0.5rem;

  /* Mobile: 44px */
  @media (width < 768px) {
    min-height: 2.75rem;
    padding-block: 0.75rem;
  }

  /* Container query */
  @container layout (inline-size < 48rem) {
    min-height: 2.75rem;
  }
}

/* ============================================================================
   ðŸ“± MOBILE MENU - Visibility control
   ============================================================================ */

/* Mobile menu button */
button[aria-label*='menu' i],
button[aria-label*='Menu' i] {
  display: none;

  @media (width < 768px) {
    display: inline-flex !important;
    width: 2.75rem;
    height: 2.75rem;
  }
}

/* ============================================================================
   ðŸ“ FLUID TYPOGRAPHY - Responsive scaling
   ============================================================================ */

/* Headings with fluid sizing */
h1 {
  font-size: clamp(2rem, 5vw, 3rem);
  line-height: 1.2;
}

h2 {
  font-size: clamp(1.5rem, 4vw, 2.25rem);
  line-height: 1.25;
}

h3 {
  font-size: clamp(1.25rem, 3vw, 1.875rem);
  line-height: 1.3;
}

h4 {
  font-size: clamp(1.125rem, 2.5vw, 1.5rem);
  line-height: 1.4;
}

/* ============================================================================
   ðŸŽ¯ CONTAINER QUERIES - Component responsiveness
   ============================================================================ */

/* Card grid - adapts to container width */
@container layout (inline-size > 48rem) {
  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
  }
}

@container layout (inline-size < 48rem) {
  .card-grid {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
}

/* Form layout - stacks on narrow containers */
@container layout (inline-size < 32rem) {
  .form-row {
    grid-template-columns: 1fr;
  }
}

/* ============================================================================
   âš¡ PERFORMANCE - Hardware acceleration
   ============================================================================ */

button,
input[type='checkbox'],
input[type='radio'],
a {
  transform: translateZ(0);
  will-change: auto;
}

/* Focus indicators */
input[type='checkbox']:focus-visible,
input[type='radio']:focus-visible,
button:focus-visible {
  outline: 2px solid var(--focus-ring-color, oklch(55% 0.18 250 / 0.5));
  outline-offset: 2px;
  border-radius: 0.25rem;
}

/* ============================================================================
   â™¿ ACCESSIBILITY - Motion preferences
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* ============================================================================
   ðŸ–¨ï¸ PRINT STYLES - Optimized for printing
   ============================================================================ */

@media print {
  button,
  .no-print {
    display: none !important;
  }

  * {
    background: white !important;
    color: black !important;
    box-shadow: none !important;
  }

  body {
    font-size: 12pt;
    line-height: 1.5;
  }

  a[href]::after {
    content: ' (' attr(href) ')';
  }

  h1,
  h2,
  h3 {
    page-break-after: avoid;
  }
}
